# 学習インプットページ - 画面設計書

## 📋 ドキュメント情報
- **作成日**: 2025-10-07
- **バージョン**: 1.0
- **関連**: [要件定義書](./01-requirements.md)

---

## 🎨 画面設計方針

### デザイン原則
1. **シンプル**: 情報過多を避け、学習に集中できる
2. **一貫性**: 既存のデザインシステムを踏襲
3. **直感的**: 迷わず操作できるUI
4. **レスポンシブ**: モバイル・タブレット・PC対応

### カラースキーム
- **プライマリ**: #8E9C78（既存のブランドカラー）
- **背景**: #FFFFFF（白）
- **テキスト**: #000000（黒）、#6F6F6F（グレー）
- **アクセント**: 分野ごとの色（blue-500, green-500, purple-500）

---

## 📐 画面レイアウト

### 1. 全体構成（タブ切り替え型）

```
┌────────────────────────────────────────────────┐
│  [← 戻る] コンピュータシステム                    │
├────────────────────────────────────────────────┤
│  [📖 学習] [✍️ 演習] [📊 統計]                  │ ← タブ
├────────────────────────────────────────────────┤
│                                                │
│  【学習タブ選択時】                              │
│  ┌────────────────┐  ┌──────────────────┐    │
│  │  目次          │  │  学習コンテンツ    │    │
│  │  ============  │  │  ===============  │    │
│  │  □ 五大装置   │  │  # 五大装置        │    │
│  │  □ CPU       │  │                   │    │
│  │  □ メモリ     │  │  コンピュータは...  │    │
│  │  □ 記憶装置   │  │                   │    │
│  └────────────────┘  │  [図解]            │    │
│                      │                   │    │
│                      │  重要ポイント:     │    │
│                      │  - ポイント1       │    │
│                      │  - ポイント2       │    │
│                      │                   │    │
│                      │  [✓ 完了マーク]    │    │
│                      └──────────────────┘    │
│                                                │
└────────────────────────────────────────────────┘
```

---

## 🖼️ 画面詳細設計

### 2-1. ヘッダー部分

```tsx
┌────────────────────────────────────────────────┐
│  [← 基本情報技術者試験に戻る]                    │
│                                                │
│  [アイコン] コンピュータシステム                  │
│  テクノロジ系 | 進捗: 45%                        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
└────────────────────────────────────────────────┘
```

**要素**:
- 戻るリンク（ArrowLeft icon）
- モジュールタイトル
- カテゴリバッジ
- 進捗バー

---

### 2-2. タブナビゲーション

```tsx
┌────────────────────────────────────────────────┐
│  [📖 学習] [✍️ 演習] [📊 統計]                  │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
└────────────────────────────────────────────────┘
```

**状態**:
- デフォルト: グレー背景
- アクティブ: 白背景 + 下線
- ホバー: 薄いグレー背景

**実装**: Radix UI Tabs

---

### 2-3. 学習コンテンツエリア（2カラムレイアウト）

#### 左カラム: 目次（Table of Contents）

```tsx
┌────────────────────┐
│  📚 目次            │
│  ─────────────────  │
│  ▼ 1. 五大装置      │ ← 展開中
│     □ 入力装置     │
│     ✓ 出力装置     │ ← 完了済み
│     □ 記憶装置     │
│  ▶ 2. CPU          │ ← 折りたたみ
│  ▶ 3. メモリ       │
│  ▶ 4. 記憶装置     │
│                    │
│  進捗: 2/12 完了    │
└────────────────────┘
```

**機能**:
- セクションのクリックで該当箇所へスクロール
- 完了マークの表示（✓）
- 現在位置のハイライト
- 進捗表示

---

#### 右カラム: コンテンツ本体

```tsx
┌──────────────────────────────────────────────┐
│  # 五大装置                                   │
│                                              │
│  コンピュータは以下の5つの基本装置で...       │
│                                              │
│  ## 1. 入力装置                              │
│  ┌────────────────────────┐                 │
│  │  [図解イメージ]          │                 │
│  │  キーボード → CPU       │                 │
│  └────────────────────────┘                 │
│                                              │
│  📌 重要ポイント                              │
│  ┌────────────────────────┐                 │
│  │ • キーボード、マウス     │                 │
│  │ • データをコンピュータへ │                 │
│  └────────────────────────┘                 │
│                                              │
│  💡 例題                                     │
│  Q: 次のうち入力装置はどれか？                 │
│  A) プリンタ B) マウス C) ...                │
│  [答えを見る ▼]                              │
│                                              │
│  [✓ このセクションを完了にする]                │
│                                              │
└──────────────────────────────────────────────┘
```

**コンテンツ要素**:
1. **見出し**: h2, h3 階層
2. **本文**: 説明文（Markdown）
3. **図解**: 画像・ダイアグラム
4. **重要ポイント**: 黄色背景のボックス
5. **例題**: 折りたたみ可能
6. **完了ボタン**: セクション完了マーク

---

### 2-4. モバイルレイアウト（< 768px）

```tsx
┌──────────────────────┐
│  [☰] コンピュータ     │ ← ハンバーガーメニュー
│  システム            │
├──────────────────────┤
│  [📖学習][✍️演習]     │ ← タブ（コンパクト）
├──────────────────────┤
│                      │
│  # 五大装置           │
│                      │
│  本文...             │
│                      │
│  [図解]              │
│                      │
│  📌 重要ポイント      │
│                      │
└──────────────────────┘
      ↑
   [🔍] 目次表示 ← フローティングボタン
```

**モバイル対応**:
- 目次は折りたたみ（フローティングボタンで表示）
- 1カラムレイアウト
- タップしやすいボタンサイズ（最小44px）
- スワイプでタブ切り替え

---

## 🎨 コンポーネント設計

### Component 1: TabNavigation

```tsx
<TabNavigation
  tabs={[
    { id: 'learn', label: '📖 学習', href: '/learn' },
    { id: 'quiz', label: '✍️ 演習', href: '/quiz' },
    { id: 'stats', label: '📊 統計', href: '/stats' }
  ]}
  activeTab="learn"
/>
```

---

### Component 2: TableOfContents

```tsx
<TableOfContents
  sections={[
    {
      id: 'section-1',
      title: '五大装置',
      completed: true,
      subsections: [
        { id: 'sub-1-1', title: '入力装置', completed: true },
        { id: 'sub-1-2', title: '出力装置', completed: false }
      ]
    }
  ]}
  currentSection="section-1"
  onNavigate={(id) => scrollToSection(id)}
/>
```

---

### Component 3: LearningContent

```tsx
<LearningContent
  title="五大装置"
  content={markdownContent}
  images={[{ src: '/images/...', alt: '...' }]}
  keyPoints={['ポイント1', 'ポイント2']}
  examples={[{ question: '...', answer: '...' }]}
  onComplete={() => markAsCompleted('section-1')}
/>
```

---

### Component 4: KeyPointsBox

```tsx
<KeyPointsBox
  title="📌 重要ポイント"
  points={[
    'コンピュータは5つの基本装置で構成',
    '入力→処理→出力の流れ'
  ]}
  color="yellow"
/>
```

---

### Component 5: ExampleQuestion

```tsx
<ExampleQuestion
  question="次のうち入力装置はどれか？"
  options={['プリンタ', 'マウス', 'ディスプレイ', 'スピーカー']}
  correctAnswer={1}
  explanation="マウスは入力装置です。プリンタ、ディスプレイ、スピーカーは出力装置です。"
  collapsible={true}
/>
```

---

### Component 6: ProgressTracker

```tsx
<ProgressTracker
  completed={5}
  total={12}
  percentage={42}
/>
```

---

## 🎯 インタラクション設計

### 動作1: セクション完了マーク

```
ユーザーアクション:
  [✓ このセクションを完了にする] ボタンクリック
    ↓
システム処理:
  1. Supabase に完了状態を保存
  2. 目次の該当セクションに✓マーク表示
  3. 進捗率を更新
  4. 完了アニメーション表示
```

---

### 動作2: 目次からのナビゲーション

```
ユーザーアクション:
  目次の「2. CPU」をクリック
    ↓
システム処理:
  1. 該当セクションへスムーズスクロール
  2. セクションタイトルを一時的にハイライト
  3. 現在位置を目次で強調表示
```

---

### 動作3: タブ切り替え

```
ユーザーアクション:
  「✍️ 演習」タブをクリック
    ↓
システム処理:
  1. URL を /quiz に変更
  2. コンテンツを切り替え（フェードアニメーション）
  3. スクロール位置をリセット
  4. 演習ページをレンダリング
```

---

## 📱 レスポンシブ対応

### ブレークポイント

| デバイス | 幅 | レイアウト |
|---------|-----|-----------|
| Mobile | < 768px | 1カラム、目次は折りたたみ |
| Tablet | 768px - 1024px | 2カラム（目次幅狭め） |
| Desktop | > 1024px | 2カラム（最適比率） |

### 目次の表示制御

```tsx
// Desktop: 常に表示（固定サイドバー）
<div className="hidden lg:block sticky top-4">
  <TableOfContents />
</div>

// Mobile: フローティングボタン
<button className="lg:hidden fixed bottom-4 right-4">
  <Menu /> 目次
</button>
```

---

## 🎨 アニメーション

### 1. ページ遷移
- **フェードイン**: opacity 0 → 1（300ms）
- **スライドアップ**: translateY(20px) → 0（300ms）

### 2. タブ切り替え
- **フェード切り替え**: 200ms
- **下線スライド**: transform（200ms ease-out）

### 3. 完了マーク
- **チェックマーク**: scale(0) → scale(1)（300ms bounce）
- **紙吹雪エフェクト**: confetti.js（オプション）

### 4. スクロール
- **スムーススクロール**: behavior: 'smooth'
- **ハイライト**: 背景色フラッシュ（500ms）

---

## 🔧 技術仕様

### 使用技術
- **フレームワーク**: Next.js 15 (App Router)
- **スタイリング**: Tailwind CSS 4
- **アニメーション**: Framer Motion
- **コンポーネント**: Radix UI
- **Markdown**: react-markdown または next-mdx-remote
- **状態管理**: React Context + Supabase

### ファイル構成

```
src/
├── app/
│   └── modules/
│       └── it-fundamentals/
│           └── [module]/
│               ├── page.tsx           ← メインページ（タブ統合）
│               └── components/
│                   ├── TabNavigation.tsx
│                   ├── TableOfContents.tsx
│                   ├── LearningContent.tsx
│                   ├── KeyPointsBox.tsx
│                   ├── ExampleQuestion.tsx
│                   └── ProgressTracker.tsx
│
├── components/
│   └── learning/
│       └── (共通コンポーネント)
│
└── lib/
    └── learning-content/
        └── computer-systems.ts  ← コンテンツデータ
```

---

## 📝 変更履歴

| 日付 | バージョン | 変更内容 | 担当者 |
|------|-----------|---------|--------|
| 2025-10-07 | 1.0 | 初版作成 | Claude |

---

## 📎 関連リンク

- [要件定義書](./01-requirements.md)
- [コンテンツ構成書](./03-content-structure.md)
- [実装計画書](./04-implementation-plan.md)
